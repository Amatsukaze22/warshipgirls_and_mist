has_wg_special_authority = {
	OR = {
		has_authority = auth_shenhai
		has_authority = auth_warshipgirls
		has_authority = auth_starshipgirls
	}
}

colonizeable_planet = {
	OR = {
		is_planet_class = pc_city
		is_planet_class = pc_wsg_port
		is_planet_class = pc_shenhai
		is_planet_class = pc_relic
		is_planet_class = pc_nuked
		is_planet_class = pc_hive
		is_planet_class = pc_machine
		habitable_structure = yes
		habitable_planet = yes
	}
}

habitable_planet = {
	OR = {
		is_planet_class = pc_desert
		is_planet_class = pc_tropical
		is_planet_class = pc_arid
		is_planet_class = pc_continental
		is_planet_class = pc_ocean
		is_planet_class = pc_tundra
		is_planet_class = pc_arctic
		is_planet_class = pc_alpine
		is_planet_class = pc_savannah
		is_planet_class = pc_gaia
		is_planet_class = pc_city
		is_planet_class = pc_wsg_port
		is_planet_class = pc_shenhai
		is_planet_class = pc_relic
	}
}

has_UR_admiral = {
	OR = {
		has_country_flag = ra_admiral_101
		has_country_flag = ra_admiral_102
		has_country_flag = ra_admiral_103
		has_country_flag = ra_admiral_104
		has_country_flag = ra_admiral_105
		has_country_flag = ra_admiral_106
		has_country_flag = ra_admiral_107
		has_country_flag = ra_admiral_108
		has_country_flag = ra_admiral_109
		has_country_flag = ra_admiral_110
		has_country_flag = ra_admiral_201
		has_country_flag = ra_admiral_202
		has_country_flag = ra_admiral_203
		has_country_flag = ra_admiral_204
		has_country_flag = ra_admiral_205
		has_country_flag = ra_admiral_1001
		has_country_flag = ra_admiral_1002
		has_country_flag = ra_admiral_1003
		has_country_flag = ra_admiral_1004
	}
}

is_wg_fallen_empire = {
	OR = {
		is_fallen_empire = yes
		is_country_type = awakened_fallen_empire
	}
	has_authority = auth_wg_fe
}

wsg_lady_available = {
	OR = {
		has_country_flag = gain_wsg_lady
		is_same_value = event_target:wsg_lady_own_country
	}
	NOR = {
		has_modifier = wsg_lady_recover_cd
		has_country_flag = modifing_wsg_lady
		has_country_flag = ban_commu_with_wsg_lady
	}
}

has_wsg_lady_active_diplo = {
	has_active_event = {
		wg_lady.10024 # 初始界面
		wg_lady.10025 # 总督
		wg_lady.10026 # 战舰
		wg_lady.10027 # 陆军
		wg_lady.10028 # 武装科研船
		wg_lady.10062 # 改称呼
		wg_lady.10124 # 初始界面
		wg_lady.10125 # 总督
		wg_lady.10126 # 战舰
		wg_lady.10127 # 陆军
		wg_lady.10128 # 武装科研船
		wg_lady.10162 # 改称呼
		wg_lady.10224 # 初始界面
		wg_lady.10225 # 总督
		wg_lady.10226 # 战舰
		wg_lady.10227 # 陆军
		wg_lady.10228 # 武装科研船
		wg_lady.10262 # 改称呼
		wg_lady.29 # 大破
	}
}

has_enough_consumer_goods = {
	OR = {
		AND = {
			years_passed < 40
			resource_stockpile_compare = { resource = consumer_goods value >= 375 }
		}
		AND = {
			years_passed >= 40
			years_passed < 80
			resource_stockpile_compare = { resource = consumer_goods value >= 1500 }
		}
		AND = {
			years_passed >= 80
			years_passed < 120
			resource_stockpile_compare = { resource = consumer_goods value >= 2625 }
		}
		AND = {
			years_passed >= 120
			years_passed < 160
			resource_stockpile_compare = { resource = consumer_goods value >= 4500 }
		}
		AND = {
			years_passed >= 160
			resource_stockpile_compare = { resource = consumer_goods value >= 9900 }
		}
	}
}

has_wg_traits = {
	OR = {
		has_trait = wsg_trait_warshipgirls
		has_trait = wsg_trait_warshipgirls1
		has_trait = wsg_trait_mist
		has_trait = sh_trait_shenhai
		has_trait = sh_trait_shenhai1
		has_trait = sh_trait_shenhai3
		has_trait = swg_trait_starshipgirls # 星战少女特质
	}
}

is_special_affection_leader = {
	OR = {
		has_leader_flag = wsg_special_affection_leader 
		has_leader_flag = wsg_lady_leader
		has_leader_flag = 灰风领袖
		has_leader_flag = Sharan_leader # 屑狐狸
		has_leader_flag = yuudaichi_leader # 夕立
		has_leader_flag = Pellaeon_leader # 佩雷恩
		has_leader_flag = bubbles_leader
	}
}

is_wg_leader = {
	is_special_affection_leader = no
	# 不能是缄默深海
	owner = {
		NOR = {
			has_ascension_perk = ap_shenhai_silent
			has_civic = civic_CM
		}
	}
	OR = { 
		species = { 
			has_wg_traits = yes
		}
		has_leader_flag = wsg_event_leader
		has_leader_flag = overtime_yamato #劳模
		has_trait = leader_trait_admiral_Rodney #老罗
		has_trait = leader_trait_governor_Ella #艾拉
		has_trait = leader_trait_governor_santee #桑提
		has_trait = leader_trait_general_washington_axe #花生
		has_trait = leader_trait_ruler_lexington #太太
		has_trait = leader_trait_scientist_astesia #星极
	}
}

# scope: leader
is_wg_leader_with_affection_not_full = {
	OR = {
		AND = {
			is_wg_leader = yes
			NOT = { has_leader_flag = affection_max }
		}
		AND = {
			has_leader_flag = wsg_shimakaze_leader
			owner = { 
				has_country_flag = get_wsg_shimakaze 
				NOT = { has_country_flag = shimakaze_affection_max }
			}
		}
		AND = {
			has_leader_flag = wsg_lady_leader
			owner = { 
				has_country_flag = gain_wsg_lady 
				NOT = { has_country_flag = lady_affection_max }
			}
		}
		AND = {
			has_leader_flag = 灰风领袖
			owner = { 
				is_vaild_gray_owner = yes
				NOT = { has_country_flag = gray_affection_max }
			}
		}
		AND = {
			has_leader_flag = Sharan_leader
			owner = { 
				has_country_flag = has_afk_Sharan
				NOT = { has_country_flag = Sharan_affection_max }
			}
		}
		AND = {
			has_leader_flag = yuudaichi_leader
			owner = { 
				has_country_flag = has_kc_yuudaichi
				NOT = { has_country_flag = yuudaichi_affection_max }
			}
		}
		AND = {
			has_leader_flag = Pellaeon_leader
			owner = { 
				has_country_flag = has_afk_Pellaeon
				NOT = { has_country_flag = Pellaeon_affection_max }
			}
		}
		AND = {
			has_leader_flag = bubbles_leader
			owner = { 
				has_country_flag = modified_bubbles
				NOT = { has_country_flag = bubbles_affection_max }
			}
		}
	}
}

has_sh_traits = {
	OR = {
		has_trait = leader_trait_admiral_shenhai
		has_trait = leader_trait_general_shenhai
		has_trait = leader_trait_governor_shenhai
		has_trait = leader_trait_scientist_shenhai
		has_trait = leader_trait_ruler_shenhai
		has_trait = leader_trait_admiral_shenhai1
		has_trait = leader_trait_general_shenhai1
		has_trait = leader_trait_governor_shenhai1
		has_trait = leader_trait_scientist_shenhai1
		has_trait = leader_trait_ruler_shenhai1
		has_trait = leader_trait_admiral_shenhai2
		has_trait = leader_trait_general_shenhai2
		has_trait = leader_trait_governor_shenhai2
		has_trait = leader_trait_scientist_shenhai2
		has_trait = leader_trait_ruler_shenhai2
	}
}

# scope: country
is_vaild_gray_owner = {
	OR = {
		is_same_value = event_target:gray_owner 
		has_country_flag = gray_owner
	}
}

# scope: country
bubbles_available = {
	NOR = { 
		has_country_flag = bubbles_depressed 
		has_country_flag = ban_commu_with_bubbles
		has_country_flag = bubbles_become_enemy
	}
}

# scope: country
check_affection_event_active_diplo = {
	has_active_event = {
		wg_aft.2005
		wg_aft.2006
		wg_aft.2007
		wg_aft.2008
		wg_aft.2009
		wg_aft.2010
	}
}

has_multiple_affection_traits = {
	OR = {
		calc_true_if = { amount = 2 
			# 总督
			has_trait = leader_trait_governor_affection_lv1
			has_trait = leader_trait_governor_affection_lv2
			has_trait = leader_trait_governor_affection_lv3
			has_trait = leader_trait_governor_affection_lv4
			has_trait = leader_trait_governor_affection_lv4_max
			has_trait = leader_trait_governor_affection_lv5
		}
		calc_true_if = { amount = 2 
			# 科学家
			has_trait = leader_trait_scientist_affection_lv1
			has_trait = leader_trait_scientist_affection_lv2
			has_trait = leader_trait_scientist_affection_lv3
			has_trait = leader_trait_scientist_affection_lv4
			has_trait = leader_trait_scientist_affection_lv4_max
			has_trait = leader_trait_scientist_affection_lv5
		}
		calc_true_if = { amount = 2 
			# 海军上将
			has_trait = leader_trait_admiral_affection_lv1
			has_trait = leader_trait_admiral_affection_lv2
			has_trait = leader_trait_admiral_affection_lv3
			has_trait = leader_trait_admiral_affection_lv4
			has_trait = leader_trait_admiral_affection_lv4_max
			has_trait = leader_trait_admiral_affection_lv5
		}
		calc_true_if = { amount = 2 
			# 陆军将领
			has_trait = leader_trait_general_affection_lv1
			has_trait = leader_trait_general_affection_lv2
			has_trait = leader_trait_general_affection_lv3
			has_trait = leader_trait_general_affection_lv4
			has_trait = leader_trait_general_affection_lv4_max
			has_trait = leader_trait_general_affection_lv5
		}
		calc_true_if = { amount = 2 
			# 统治者
			has_ruler_trait = leader_trait_ruler_affection_lv1
			has_ruler_trait = leader_trait_ruler_affection_lv2
			has_ruler_trait = leader_trait_ruler_affection_lv3
			has_ruler_trait = leader_trait_ruler_affection_lv4
			has_ruler_trait = leader_trait_ruler_affection_lv4_max
			has_ruler_trait = leader_trait_ruler_affection_lv5
		}
	}
}

has_married_selected_leader = {
	OR = {
		AND = {
			check_variable = { which = selected_check_affection_leader value = 1 }
			ruler = { has_leader_flag = married }
		}
		AND = {
			check_variable = { which = selected_check_affection_leader value = 2 }
			has_country_flag = married_wsg_lady
		}
		AND = {
			check_variable = { which = selected_check_affection_leader value = 3 }
			has_country_flag = married_wsg_shimakaze
		}
		AND = {
			check_variable = { which = selected_check_affection_leader value = 4 }
			has_country_flag = married_gray
		}
		AND = {
			check_variable = { which = selected_check_affection_leader value = 5 }
			has_country_flag = married_bubbles
		}
		AND = {
			check_variable = { which = selected_check_affection_leader value = 6 }
			has_country_flag = married_swgs_Sharan
		}
		AND = {
			check_variable = { which = selected_check_affection_leader value = 6 }
			has_country_flag = married_swgs_yuudaichi
		}
		AND = {
			check_variable = { which = selected_check_affection_leader value = 6 }
			has_country_flag = married_swgs_Pellaeon
		}
		AND = {
			check_variable = { which = selected_check_affection_leader value = 6 }
			has_country_flag = married_swgs_yuudaichi
		}
	}
}

# scope: leader
has_affection_trait = {
	OR = {
		# 总督
		has_trait = leader_trait_governor_affection_lv1
		has_trait = leader_trait_governor_affection_lv2
		has_trait = leader_trait_governor_affection_lv3
		has_trait = leader_trait_governor_affection_lv4
		has_trait = leader_trait_governor_affection_lv4_max
		has_trait = leader_trait_governor_affection_lv5
		# 科学家
		has_trait = leader_trait_scientist_affection_lv1
		has_trait = leader_trait_scientist_affection_lv2
		has_trait = leader_trait_scientist_affection_lv3
		has_trait = leader_trait_scientist_affection_lv4
		has_trait = leader_trait_scientist_affection_lv4_max
		has_trait = leader_trait_scientist_affection_lv5
		# 海军上将
		has_trait = leader_trait_admiral_affection_lv1
		has_trait = leader_trait_admiral_affection_lv2
		has_trait = leader_trait_admiral_affection_lv3
		has_trait = leader_trait_admiral_affection_lv4
		has_trait = leader_trait_admiral_affection_lv4_max
		has_trait = leader_trait_admiral_affection_lv5
		# 陆军将领
		has_trait = leader_trait_general_affection_lv1
		has_trait = leader_trait_general_affection_lv2
		has_trait = leader_trait_general_affection_lv3
		has_trait = leader_trait_general_affection_lv4
		has_trait = leader_trait_general_affection_lv4_max
		has_trait = leader_trait_general_affection_lv5
	}
}