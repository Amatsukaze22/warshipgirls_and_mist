namespace = wsg_shimakaze

country_event = {
	id = wsg_shimakaze.1
	title = wsg_shimakaze.1.title
	desc = wsg_shimakaze.1.desc
	picture = GFX_evt_mist_yubari
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { any_country = { has_country_flag = get_wsg_shimakaze }}}
			create_species = {
				name = MIST_LEADER
				plural = MIST_LEADER
				class = Warship_Girl
				portrait = wsg11
				name_list = WSG
				effect = {
					save_global_event_target_as = wsg_shimakaze_species
				}
			}
			create_country = {
				name = "Name_mist_leader_shimakaze"
				species = event_target:wsg_shimakaze_species
				type = wsg_shimakaze
				flag = {
					icon = {
						category = "warshipgirls"
						file = "wg_flags_02.dds"
					}
					background={
						category="backgrounds"
						file="stripes.dds"
					}
					colors={
						"blue"
						"indigo"
						"null"
						"null"
					}
				}
				effect = {
					save_global_event_target_as = wsg_shimakaze_country
					set_country_flag = wsg_shimakaze_country	
				}
			}
		}
		set_country_flag = get_wsg_shimakaze
		event_target:wsg_shimakaze_country = {
			establish_communications_no_message = root
		}
		save_global_event_target_as = wsg_shimakaze_own_country
		set_variable = { which = shimakaze_affection value = 1 }
		set_variable = { which = shimakaze_affection_level value = 1 }
		set_variable = { which = shimakaze_level value = 1 }
	}

	option = {
		name = wsg_shimakaze.1.a
		hidden_effect = {
			country_event = { id = wsg_shimakaze.2 }
		}
	}
}

country_event = {
	id = wsg_shimakaze.2
	title = "TRANSMISSION"
	desc = wsg_shimakaze.2.desc
	show_sound = event_shimakaze_first_meet
	is_triggered_only = yes
	diplomatic = yes
	force_open = yes

	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}

	option = {
		name = wsg_shimakaze.2.a
	}
}

country_event = {
	id = wsg_shimakaze.3
	title = wsg_shimakaze
	desc = wsg_shimakaze.3.desc
	is_triggered_only = yes
	show_sound = event_shimakaze_contact
	diplomatic = yes
	force_open = yes
	trigger = {
		OR = {
			from = { is_country_type = wsg_shimakaze }
			is_same_value = root
		}
		OR = {
			shimakaze_active_diplo = no
			from = { is_same_value = root }
		}
	}

	immediate = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = had_choosed_talk_flag
				}
			}	
			random_list = {
				1 = {
					set_country_flag = wsg_shimakaze_talking1
				}
				1 = {
					set_country_flag = wsg_shimakaze_talking2
				}
				1 = {
					set_country_flag = wsg_shimakaze_talking3
				} 
			}
		}
		set_country_flag = wsg_shimakaze_engaged
	}
	
	after = {
		hidden_effect = { 
			remove_country_flag = wsg_shimakaze_engaged 
			remove_country_flag = had_choosed_talk_flag
			remove_country_flag = wsg_shimakaze_talking1
			remove_country_flag = wsg_shimakaze_talking2
			remove_country_flag = wsg_shimakaze_talking3
		}
	}

	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}

	option = {
		name = wsg_shimakaze.3.a
		trigger = {
			NOT = {
				has_country_flag = wsg_shimakaze_governor_active
			}
		}
		hidden_effect = {
			country_event = {
				id = wsg_shimakaze.30010
			}
		}
	}
	option = {
		name = wsg_shimakaze.3.b
		trigger = {
			NOT = {
				has_country_flag = wsg_shimakaze_scientist_active
			}
		}
		hidden_effect = {
			country_event = {
				id = wsg_shimakaze.30011
			}
		}
	}
	option = {
		name = wsg_shimakaze.3.c
		trigger = {
			NOT = {
				has_country_flag = wsg_shimakaze_admiral_active
			}
		}
		hidden_effect = {
			country_event = {
				id = wsg_shimakaze.30012
			}
		}
	}
	option = {
		name = wsg_shimakaze.3.d
		trigger = {
			NOT = {
				has_country_flag = wsg_shimakaze_general_active
			}
		}
		hidden_effect = {
			country_event = {
				id = wsg_shimakaze.30013
			}
		}
	}
	option = {
		name = wsg_shimakaze.3.e
		hidden_effect = {
			if = {
				limit = { 
					has_country_flag = wsg_shimakaze_talking1
				}
				country_event = {
					id = wsg_shimakaze.30001
				}
			}
			if = {
				limit = { 
					has_country_flag = wsg_shimakaze_talking2
				}
				country_event = {
					id = wsg_shimakaze.30002
				}
			}
			if = {
				limit = { 
					has_country_flag = wsg_shimakaze_talking3
				}
				country_event = {
					id = wsg_shimakaze.30003
				}
			}
		}
	}
	option = {
		name = wsg_shimakaze_talk_exit
		hidden_effect = {
			remove_country_flag = had_choosed_talk_flag
			remove_country_flag = wsg_shimakaze_engaged
		}
		default_hide_option = yes
	}
}

#对话1界面
country_event = {
	id = wsg_shimakaze.30001
	title = wsg_shimakaze
	desc = wsg_shimakaze.30001.desc
	show_sound = event_shimakaze_talk1
	is_triggered_only = yes
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}
	option = {
		name = wsg_shimakaze_talk_return
		hidden_effect = { 
			remove_country_flag = wsg_shimakaze_talking1
			random_list = {
				1 = {
					set_country_flag = wsg_shimakaze_talking2
				}
				1 = {
					set_country_flag = wsg_shimakaze_talking3
				} 
			}
			set_country_flag = had_choosed_talk_flag
			remove_country_flag = wsg_shimakaze_engaged
			country_event = {
				id = wsg_shimakaze.3
			}
		}
	}
	option = {
		name = wsg_shimakaze_talk_exit
		default_hide_option = yes
		hidden_effect = {
			remove_country_flag = had_choosed_talk_flag
			remove_country_flag = wsg_shimakaze_engaged 
		}
	}
}

#对话2界面
country_event = {
	id = wsg_shimakaze.30002
	title = wsg_shimakaze
	desc = wsg_shimakaze.30002.desc
	show_sound = event_shimakaze_talk2
	is_triggered_only = yes
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}
	option = {
		name = wsg_shimakaze_talk_return
		hidden_effect = { 
			remove_country_flag = wsg_shimakaze_talking2
			random_list = {
				1 = {
					set_country_flag = wsg_shimakaze_talking1
				}
				1 = {
					set_country_flag = wsg_shimakaze_talking3
				} 
			}
			set_country_flag = had_choosed_talk_flag
			remove_country_flag = wsg_shimakaze_engaged
			country_event = {
				id = wsg_shimakaze.3
			}
		}
	}
	option = {
		name = wsg_shimakaze_talk_exit
		hidden_effect = {
			remove_country_flag = had_choosed_talk_flag
			remove_country_flag = wsg_shimakaze_engaged 
		}
		default_hide_option = yes
	}
}

#对话3界面
country_event = {
	id = wsg_shimakaze.30003
	title = wsg_shimakaze
	desc = wsg_shimakaze.30003.desc
	show_sound = event_shimakaze_talk3
	is_triggered_only = yes
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}
	option = {
		name = wsg_shimakaze_talk_return
		hidden_effect = { 
			remove_country_flag = wsg_shimakaze_talking3
			random_list = {
				1 = {
					set_country_flag = wsg_shimakaze_talking1
				}
				1 = {
					set_country_flag = wsg_shimakaze_talking2
				} 
			}
			set_country_flag = had_choosed_talk_flag
			remove_country_flag = wsg_shimakaze_engaged
			country_event = {
				id = wsg_shimakaze.3
			}
		}
	}
	option = {
		name = wsg_shimakaze_talk_exit
		hidden_effect = {
			remove_country_flag = wsg_shimakaze_engaged
			remove_country_flag = had_choosed_talk_flag
		}
		default_hide_option = yes
	}
}

#总督
country_event = {
	id = wsg_shimakaze.30010
	title = wsg_shimakaze
	desc = wsg_shimakaze.30010.desc
	is_triggered_only = yes
	show_sound = event_shimakaze_governor
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}

	immediate = {
		create_wsg_shimakaze_governor = yes
	}
	option = {
		name = wsg_shimakaze_talk_exit
		hidden_effect = {
			remove_country_flag = wsg_shimakaze_engaged 
		}
		default_hide_option = yes
	}
}

#科学家
country_event = {
	id = wsg_shimakaze.30011
	title = wsg_shimakaze
	desc = wsg_shimakaze.30011.desc
	is_triggered_only = yes
	show_sound = event_shimakaze_scientist
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}

	immediate = {
		create_wsg_shimakaze_scientist = yes
	}
	option = {
		name = wsg_shimakaze_talk_exit
		hidden_effect = {
			remove_country_flag = wsg_shimakaze_engaged 
		}
		default_hide_option = yes
	}
}

#海军上将
country_event = {
	id = wsg_shimakaze.30012
	title = wsg_shimakaze
	desc = wsg_shimakaze.30012.desc
	is_triggered_only = yes
	show_sound = event_shimakaze_admiral
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}

	immediate = {
		create_wsg_shimakaze_admiral = yes
	}
	option = {
		name = wsg_shimakaze_talk_exit
		hidden_effect = {
			remove_country_flag = wsg_shimakaze_engaged 
		}
		default_hide_option = yes
	}
}

#陆军
country_event = {
	id = wsg_shimakaze.30013
	title = wsg_shimakaze
	desc = wsg_shimakaze.30013.desc
	is_triggered_only = yes
	show_sound = event_shimakaze_general
	diplomatic = yes
	force_open = yes
	picture_event_data = {
		portrait = wsg267_1
		graphical_culture = wsg_02
		room = wg01_room
	}

	immediate = {
		create_wsg_shimakaze_general = yes
	}
	option = {
		name = wsg_shimakaze_talk_exit
		hidden_effect = {
			remove_country_flag = wsg_shimakaze_engaged 
		}
		default_hide_option = yes
	}
}